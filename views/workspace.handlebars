{{!-- ==================================================== --}}
{{!-- BookReporter :: A research project note organizer and composer --}}
{{!-- MVC with MySQL, Node, Express, Handlebars and Sequelize. --}}
{{!-- Â©2018 Nicholas Angelo Batten, Ryan Case, Melissa Derricott, Alex Silvester, Richard Trevillian --}}
{{!-- University of Richmond (Virginia) --}}
{{!-- Full Stack Developer Bootcamp (July 2018) --}}
{{!-- ==================================================== --}}
{{!-- workspace.handlebars --}}
{{!-- htmlRoutes.js renders a Handlebars view for the Project's Topics/Resources/Resource Editor page --}}
{{!-- when finished, also incorporate the code in wordprocessor.handlebars into this page --}}
{{!-- ==================================================== --}}


{{!-- QUILL THEME CSS --}}
<link href="//cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">


{{!-- START PAGE CONTAINER --}}
<div id="home">
  <div class="container">


    {{!-- START BASIC PROJECT INFO --}}
    <div class="row">
      <div class="col-12">

        <div id="project-info">
          {{!-- <div id="project-info" data-project="{{project.id}}"> --}}
          <br>
          <strong>User ID:</strong> {{project.UserId}},
          <strong>Project ID</strong>: {{project.id}},
          <strong>Project Name</strong>: {{project.projectName}}
          <br>
          <br>

        </div>

      </div>
    </div>
    {{!-- END BASIC PROJECT INFO --}}



    {{!-- START ROW FOR WP and WS --}}
    <div class="row">


      {{!-- START COL FOR QUILL EDITOR --}}
      <div id="quillBox" class="col-12">
        <div class="col-sm-12" data-project="{{project.id}}">

          {{!-- QUILL EDITOR --}}
          <div id="editor" class="col-12" data-project="{{project.id}}">

            {{!-- DRAG AND DROP EVENT HANDLERS TAGGED INLINE --}}
            <div ondrop="drop(event, target)" ondragover="allowDrop(event)"></div>

          </div>

          <br>
          <br>

        </div>
      </div>
      {{!-- END COL FOR QUILL EDITOR --}}



      {{!-- START COL FOR WS --}}
      <div class="col-12">

        {{!-- START NEW TOPIC INPUT FIELD AND BUTTON --}}
        <div class="input-group mb-3">

          <div class="input-group-prepend">
            <button class="btn btn-secondary" type="button" id="add-topic-button">
              +
            </button>
          </div>

          <input id="add-topic-name" type="text" class="form-control" placeholder="add a new Topic to this Project">

          <div class='input-group-append'>
            <button class='btn btn-outline-secondary toggle-all-resources' type='button' data-topic='{{id}}'>
              >
            </button>
          </div>

        </div>
        {{!-- END NEW TOPIC INPUT FIELD AND BUTTON --}}

        {{!-- DIV TO FILL WITH HANDLEBARS TOPICS AND RESOURCES --}}
        <div id="project_display" class="col-12 list-group pr-0">


          {{#each project.Topics}}

            {{!-- START EACH TOPIC CONTAINER --}}
            <div id='t-{{id}}' class='topicbox list-group-item list-group-item-action mb-4'>

              {{!-- START TOPIC NAME DISPLAY-EDIT-DELETE --}}
              <div class='input-group mb-3'>

                <div class='input-group-prepend'>
                  <button class='btn btn-danger delete-topic' type='button' data-topic='{{id}}'>
                    x
                  </button>
                </div>

                <input type='text' class='tname form-control' placeholder='{{topicName}}' data-topic='{{id}}'>

                <div class='input-group-append'>
                  <button class='btn btn-outline-danger toggle-topic-resources' type='button' data-topic='{{id}}'>
                    >
                  </button>
                </div>

              </div>
              {{!-- END TOPIC NAME DISPLAY-EDIT-DELETE --}}

              {{!-- START ADD RESOURCE TO TOPIC FIELD AND BUTTON --}}
              <div class='input-group mb-3'>
                <div class='input-group-prepend'>
                  <button class='btn btn-success add-resource' type='button' data-topic='{{id}}'>
                    +
                  </button>
                </div>
                <input id='add-resource-name-{{id}}' type='text' class='form-control' placeholder='add a Resource to this Topic'>
              </div>
              {{!-- END ADD RESOURCE TO TOPIC FIELD AND BUTTON --}}

              {{!-- START EACH RESOURCE CONTAINER --}}
              <div id='resourcelist-t-{{id}}' class='list-group'>

                {{#each Resources}}

                  {{!-- START RESOURCE NAME DISPLAY-EDIT-DELETE --}}
                  <div class='input-group mb-1'>

                    <div class='input-group-prepend'>
                      <button class='btn btn-primary delete-resource' type='button' data-resource='{{id}}'>
                        x
                      </button>
                    </div>

                    <input type='text' class='rname form-control' placeholder='{{resourceName}}' data-resource='{{id}}'>

                    <div class='input-group-append'>
                      <button class='btn btn-outline-primary toggle-resource' type='button' data-resource='{{id}}'>
                        >
                      </button>
                    </div>

                  </div>
                  {{!-- END RESOURCE NAME DISPLAY-EDIT-DELETE --}}

                  {{!-- START RESOURCE CONTENT AREA --}}
                  <textarea id='content-r-{{id}}' class='rescont form-control mb-3' placeholder='{{resourceContent}}'
                    data-resource='{{id}}' data-topic='{{TopicId}}' style='display: block;'></textarea>
                  {{!-- END RESOURCE CONTENT AREA --}}

                {{/each}}

              </div>
              {{!-- END EACH RESOURCE CONTAINER --}}

            </div>
            {{!-- END EACH TOPIC CONTAINER --}}

          {{/each}}

        </div>

      </div>
      {{!-- END COL FOR WS --}}


    </div>
    {{!-- END ROW FOR WP and WS --}}

  </div>
</div>
{{!-- END PAGE CONTAINER --}}


{{!-- JQUERY --}}
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

{{!-- QUILL MIN.JS --}}
<script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>

{{!-- link to the event handlers scripts for this page --}}
<script src="/js/workSpace.js"></script>

{{!-- MAIN JS --}}
<script src="js/wordProcessor.js"></script>